\chapter{Development Process}
\label{chap:development-process}

The following is a rough outline of the steps I have gone through this far for
this project:

\begin{itemize}
    \item start development of system tests (this was pushed too later to focus
          on unit tests)
    \item test inputting default values as \texttt{float}s and \texttt{int}s
    \item check constraints for valid input
    \item check constraints for invalid input
    \item test calculation of:
          \begin{itemize}
              \item \texttt{t\_flight}
              \item \texttt{p\_land}
              \item \texttt{d\_offset}
              \item \texttt{s}
          \end{itemize}
    \item test valid output of writing output
    \item test for projectile going long
    \item integrate system tests into existing unit tests
    \item test for assumption violation of g
          \begin{itemize}
              \item code generation could be flawed, so we can't assume
                    assumptions are respected
              \item test cases shouldn't necessarily match what is done by the
                    code; for example, g = 0 shouldn't really give a
                    \texttt{ZeroDivisionError}; it should be a \texttt{ValueError}
          \end{itemize}
    \item test that calculations stop on a constraint violation; this is a
          requirement should be met by the software
    \item test for empty input file
    \item start creation of test summary (for \texttt{InputParameters} module)
          \begin{itemize}
              \item it was difficult to judge test case coverage/quality from
                    the code itself
              \item this is not really a test plan, as it doesn't capture the
                    testing philosophy
              \item rationale for each test explains why it supports coverage
                    and how Drasil derived (would derive) it
          \end{itemize}
    \item start researching testing
    \item noticed that we should capture what should be done when a constraint
          is violated in a reusable way
          \begin{itemize}
              \item have an underutilized method of doing so (see \issueref{3523})
              \item relevant FR is disconnected from code (\issueref{3523}); we've had
                    this issue before (\issueref{3259})
          \end{itemize}
\end{itemize}

\section{Improvements to Manual Test Code}

Even though this code will eventually be generated by Drasil, it is important
that it is still human-readable, for the benefit of those reading the code
later. This is one of the goals of Drasil (see \issueref{3417} for an example
of a similar issue). As such, the following improvements were discovered and
implement in the manually created testing code:

\begin{itemize}
    \item use pytest's parameterization
    \item reuse functions/data for consistency
    \item improve import structure
    \item use \texttt{conftest} for running code before all tests of a module
\end{itemize}

\subsection{Testing with Mocks}

When testing code, it is common to first test lower-level modules, then assume
that these modules work when testing higher-level modules. An example would be
using an input module to set up test cases for a calculation module after
testing the input module. This makes sense when writing test cases manually
since it reduces the amount of code that needs to be written and still provides
a reasonably high assurance in the software; if there is an issue with the
input module that affects the calculation module tests, the issue would be
revealed when testing the input module.

However, since these test cases will be generated by Drasil, they can be
consistently generated with no additional effort. This means that the testing
of each module can be done completely independently, increasing the confidence
in the tests.
